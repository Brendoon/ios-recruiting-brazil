<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
<title>MoviesViewController.swift - Slather</title>
<link href="slather.css" media="all" rel="stylesheet">
</head>
<body>
<header><div class="row"><a href="index.html"><img src="logo.jpg" alt="Slather logo"></a></div></header><div class="row"><div id="reports">
<h2 class="cov_title">
<span>Coverage for "MoviesViewController.swift" : </span><span class="cov_low">66.34%</span>
</h2>
<h4 class="cov_subtitle">(67 of 101 relevant lines covered)</h4>
<h4 class="cov_filepath">Movs/Scenes/Movies/MoviesViewController.swift</h4>
<table class="source_code">
<tr class="never">
<td class="num">1</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">2</td>
<td class="src"><pre><code class="objc">//  MoviesViewController.swift</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">3</td>
<td class="src"><pre><code class="objc">//  Movs</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">4</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">5</td>
<td class="src"><pre><code class="objc">//  Created by Brendoon Ryos on 24/01/19.</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">6</td>
<td class="src"><pre><code class="objc">//  Copyright (c) 2019 Brendoon Ryos. All rights reserved.</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">7</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">8</td>
<td class="src"><pre><code class="objc">//  This file was generated by the Clean Swift Xcode Templates so</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">9</td>
<td class="src"><pre><code class="objc">//  you can apply clean architecture to your iOS and Mac projects,</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">10</td>
<td class="src"><pre><code class="objc">//  see http://clean-swift.com</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">11</td>
<td class="src"><pre><code class="objc">//</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">12</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">13</td>
<td class="src"><pre><code class="objc">import UIKit</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">14</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">15</td>
<td class="src"><pre><code class="objc">enum SearchingState {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">16</td>
<td class="src"><pre><code class="objc">  case begin</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">17</td>
<td class="src"><pre><code class="objc">  case ended</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">18</td>
<td class="src"><pre><code class="objc">  case none</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">19</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">20</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">21</td>
<td class="src"><pre><code class="objc">protocol MoviesDisplayLogic: class {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">22</td>
<td class="src"><pre><code class="objc">  func displayMovies(viewModel: Movies.Popular.ViewModel)</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">23</td>
<td class="src"><pre><code class="objc">  func displayErrorMessage(viewModel: Movies.Popular.ViewModel)</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">24</td>
<td class="src"><pre><code class="objc">  func displayMovieDetails(viewModel: Movies.Details.ViewModel)</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">25</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">26</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">27</td>
<td class="src"><pre><code class="objc">class MoviesViewController: UIViewController {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">28</td>
<td class="src"><pre><code class="objc">  var interactor: MoviesBusinessLogic?</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">29</td>
<td class="src"><pre><code class="objc">  var router: (NSObjectProtocol &amp; MoviesRoutingLogic &amp; MoviesDataPassing)?</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">30</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">31</td>
<td class="src"><pre><code class="objc">  let moviesView = MoviesView()</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">32</td>
<td class="src"><pre><code class="objc">  var searchingState: SearchingState = .none</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">33</td>
<td class="src"><pre><code class="objc">  var currentCount = 0</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">34</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">35</td>
<td class="src"><pre><code class="objc">  // MARK: Object lifecycle</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">36</td>
<td class="src"><pre><code class="objc">  init() {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">37</td>
<td class="src"><pre><code class="objc">    super.init(nibName: nil, bundle: nil)</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">38</td>
<td class="src"><pre><code class="objc">    self.title = "Movies"</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">39</td>
<td class="src"><pre><code class="objc">    self.tabBarItem = UITabBarItem(title: self.title, image: UIImage(named: self.title!.lowercased()), tag: 0)</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">40</td>
<td class="src"><pre><code class="objc">    setup()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">41</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">42</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">43</td>
<td class="src"><pre><code class="objc">  required init?(coder aDecoder: NSCoder) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">44</td>
<td class="src"><pre><code class="objc">    super.init(coder: aDecoder)</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">45</td>
<td class="src"><pre><code class="objc">    setup()</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">46</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">47</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">48</td>
<td class="src"><pre><code class="objc">  // MARK: Setup</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">49</td>
<td class="src"><pre><code class="objc">  private func setup() {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">50</td>
<td class="src"><pre><code class="objc">    let viewController = self</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">51</td>
<td class="src"><pre><code class="objc">    let interactor = MoviesInteractor()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">52</td>
<td class="src"><pre><code class="objc">    let presenter = MoviesPresenter()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">53</td>
<td class="src"><pre><code class="objc">    let router = MoviesRouter()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">54</td>
<td class="src"><pre><code class="objc">    viewController.interactor = interactor</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">55</td>
<td class="src"><pre><code class="objc">    viewController.router = router</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">56</td>
<td class="src"><pre><code class="objc">    interactor.presenter = presenter</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">57</td>
<td class="src"><pre><code class="objc">    presenter.viewController = viewController</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">58</td>
<td class="src"><pre><code class="objc">    router.viewController = viewController</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">59</td>
<td class="src"><pre><code class="objc">    router.dataStore = interactor</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">60</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">61</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">62</td>
<td class="src"><pre><code class="objc">  // MARK: View lifecycle</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">63</td>
<td class="src"><pre><code class="objc">  override func viewDidLoad() {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">64</td>
<td class="src"><pre><code class="objc">    super.viewDidLoad()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">65</td>
<td class="src"><pre><code class="objc">    configCollection()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">66</td>
<td class="src"><pre><code class="objc">    setupSearchBar()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">67</td>
<td class="src"><pre><code class="objc">    fetchGenres()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">68</td>
<td class="src"><pre><code class="objc">    fetchMovies()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">69</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">70</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">71</td>
<td class="src"><pre><code class="objc">  override func viewWillAppear(_ animated: Bool) {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">72</td>
<td class="src"><pre><code class="objc">    super.viewWillAppear(animated)</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">73</td>
<td class="src"><pre><code class="objc">    DispatchQueue.main.async {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">74</td>
<td class="src"><pre><code class="objc">      self.searchingState = .ended</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">75</td>
<td class="src"><pre><code class="objc">      self.interactor?.fetchLocalMovies()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">76</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">77</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">78</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">79</td>
<td class="src"><pre><code class="objc">  override func loadView() {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">80</td>
<td class="src"><pre><code class="objc">    self.view = moviesView</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">81</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">82</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">83</td>
<td class="src"><pre><code class="objc">  func configCollection() {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">84</td>
<td class="src"><pre><code class="objc">    moviesView.collectionView.prefetchDataSource = self</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">85</td>
<td class="src"><pre><code class="objc">    moviesView.collectionView.setSelectionHandler(fetchGenres)</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">86</td>
<td class="src"><pre><code class="objc">    moviesView.errorView.addGestureRecognizer(UITapGestureRecognizer(target: self, action: #selector(refresh)))</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">87</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">88</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">89</td>
<td class="src"><pre><code class="objc">  @objc func refresh() {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">90</td>
<td class="src"><pre><code class="objc">    fetchMovies()</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">91</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">92</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">93</td>
<td class="src"><pre><code class="objc">  func dismissHandler() {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">94</td>
<td class="src"><pre><code class="objc">    moviesView.collectionView.reloadData()</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">95</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">96</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">97</td>
<td class="src"><pre><code class="objc">  // MARK: Fetch Movies</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">98</td>
<td class="src"><pre><code class="objc">  func fetchMovies(_ query: String? = .none) {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">99</td>
<td class="src"><pre><code class="objc">    if currentCount == 0 {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">100</td>
<td class="src"><pre><code class="objc">      moviesView.middleactivityIndicator.startAnimating()</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">101</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">102</td>
<td class="src"><pre><code class="objc">    let request = Movies.Popular.Request(query: query)</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">103</td>
<td class="src"><pre><code class="objc">    interactor?.fetchMovies(request: request)</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">104</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">105</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">106</td>
<td class="src"><pre><code class="objc">  // MARK: Fetch Genres</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">107</td>
<td class="src"><pre><code class="objc">  func fetchGenres(for movie: Movie? = .none) {</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">108</td>
<td class="src"><pre><code class="objc">    let request = Movies.Details.Request(movie: movie)</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">109</td>
<td class="src"><pre><code class="objc">    interactor?.fetchGenres(request: request)</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="covered">
<td class="num">110</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">1x</td>
</tr>
<tr class="never">
<td class="num">111</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">112</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">113</td>
<td class="src"><pre><code class="objc">extension MoviesViewController: MoviesDisplayLogic {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">114</td>
<td class="src"><pre><code class="objc">  func displayMovies(viewModel: Movies.Popular.ViewModel) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">115</td>
<td class="src"><pre><code class="objc">    self.moviesView.errorView.setup(with: .none)</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">116</td>
<td class="src"><pre><code class="objc">    self.moviesView.collectionView.updateItems(viewModel.results, searchingState: self.searchingState)</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">117</td>
<td class="src"><pre><code class="objc">    self.moviesView.middleactivityIndicator.stopAnimating()</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">118</td>
<td class="src"><pre><code class="objc">    if self.searchingState == .none { self.currentCount += viewModel.currentCount }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">119</td>
<td class="src"><pre><code class="objc">    if self.searchingState == .ended { self.searchingState = .none }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">120</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">121</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">122</td>
<td class="src"><pre><code class="objc">  func displayErrorMessage(viewModel: Movies.Popular.ViewModel) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">123</td>
<td class="src"><pre><code class="objc">    self.moviesView.collectionView.updateItems(viewModel.results, searchingState: self.searchingState)</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">124</td>
<td class="src"><pre><code class="objc">    self.moviesView.errorView.setup(with: viewModel.error)</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">125</td>
<td class="src"><pre><code class="objc">    self.moviesView.middleactivityIndicator.stopAnimating()</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">126</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">127</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">128</td>
<td class="src"><pre><code class="objc">  func displayMovieDetails(viewModel: Movies.Details.ViewModel) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">129</td>
<td class="src"><pre><code class="objc">    self.router?.routeToMovieDetails()</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">130</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">131</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">132</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">133</td>
<td class="src"><pre><code class="objc">// MARK: - UICollectionViewDataSourcePrefetching</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">134</td>
<td class="src"><pre><code class="objc">extension MoviesViewController: UICollectionViewDataSourcePrefetching {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">135</td>
<td class="src"><pre><code class="objc">  func isLoadingCell(for tag: Int) -&gt; Bool {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">136</td>
<td class="src"><pre><code class="objc">//    print(tag + 3, currentCount - 1)</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">137</td>
<td class="src"><pre><code class="objc">    return tag + 3 &gt;= currentCount - 1</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">138</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">139</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="covered">
<td class="num">140</td>
<td class="src"><pre><code class="objc">  func collectionView(_ collectionView: UICollectionView, prefetchItemsAt indexPaths: [IndexPath]) {</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">141</td>
<td class="src"><pre><code class="objc">    guard let tag = collectionView.visibleCells.last?.tag else { return }</code></pre></td>
<td class="coverage">3x</td>
</tr>
<tr class="covered">
<td class="num">142</td>
<td class="src"><pre><code class="objc">    if isLoadingCell(for: tag) {</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="missed">
<td class="num">143</td>
<td class="src"><pre><code class="objc">      if searchingState != .begin {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">144</td>
<td class="src"><pre><code class="objc">        fetchMovies()</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">145</td>
<td class="src"><pre><code class="objc">      }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="covered">
<td class="num">146</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="covered">
<td class="num">147</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">2x</td>
</tr>
<tr class="never">
<td class="num">148</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">149</td>
<td class="src"><pre><code class="objc"></code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">150</td>
<td class="src"><pre><code class="objc">// MARK: - UISearchBarDelegate</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">151</td>
<td class="src"><pre><code class="objc">extension MoviesViewController: UISearchBarDelegate {</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">152</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">153</td>
<td class="src"><pre><code class="objc">  func setupSearchBar(){</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">154</td>
<td class="src"><pre><code class="objc">    self.definesPresentationContext = true</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">155</td>
<td class="src"><pre><code class="objc">    let searchController = UISearchController(searchResultsController: nil)</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">156</td>
<td class="src"><pre><code class="objc">    searchController.definesPresentationContext = true</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">157</td>
<td class="src"><pre><code class="objc">    searchController.searchBar.delegate = self</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">158</td>
<td class="src"><pre><code class="objc">    searchController.searchBar.tintColor = ColorPalette.black</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">159</td>
<td class="src"><pre><code class="objc">    searchController.dimsBackgroundDuringPresentation = false</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">160</td>
<td class="src"><pre><code class="objc">    searchController.obscuresBackgroundDuringPresentation = false</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">161</td>
<td class="src"><pre><code class="objc">    self.navigationItem.searchController = searchController</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">162</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="never">
<td class="num">163</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">164</td>
<td class="src"><pre><code class="objc">  func searchBar(_ searchBar: UISearchBar, textDidChange searchText: String) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">165</td>
<td class="src"><pre><code class="objc">    searchingState = .begin</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">166</td>
<td class="src"><pre><code class="objc">    if !searchText.isEmpty {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">167</td>
<td class="src"><pre><code class="objc">      fetchMovies(searchText)</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">168</td>
<td class="src"><pre><code class="objc">    } else {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">169</td>
<td class="src"><pre><code class="objc">      searchingState = .ended</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">170</td>
<td class="src"><pre><code class="objc">      interactor?.fetchLocalMovies()</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">171</td>
<td class="src"><pre><code class="objc">    }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">172</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">173</td>
<td class="src"><pre><code class="objc">  </code></pre></td>
<td class="coverage"></td>
</tr>
<tr class="missed">
<td class="num">174</td>
<td class="src"><pre><code class="objc">  func searchBarCancelButtonClicked(_ searchBar: UISearchBar) {</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">175</td>
<td class="src"><pre><code class="objc">    searchingState = .ended</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">176</td>
<td class="src"><pre><code class="objc">    interactor?.fetchLocalMovies()</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="missed">
<td class="num">177</td>
<td class="src"><pre><code class="objc">  }</code></pre></td>
<td class="coverage">!</td>
</tr>
<tr class="never">
<td class="num">178</td>
<td class="src"><pre><code class="objc">}</code></pre></td>
<td class="coverage"></td>
</tr>
</table>
</div></div>
<footer><div class="row">
<p><a href="https://github.com/SlatherOrg/slather">Fork me on Github</a></p>
<p>&copy; 2019 Slather</p>
</div></footer><script src="highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script>
</body>
</html>
